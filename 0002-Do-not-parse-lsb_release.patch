From a34df6a797f588dfd26b658913a9789510481f5d Mon Sep 17 00:00:00 2001
From: Alberto Murillo <alberto.murillo.silva@intel.com>
Date: Tue, 26 Jan 2016 10:21:49 -0600
Subject: [PATCH 2/2] Do not parse lsb_release

---
 src/Makefile.in                  | 6 +-----
 src/ceph-detect-init/Makefile.am | 6 +-----
 src/common/util.cc               | 2 +-
 3 files changed, 3 insertions(+), 11 deletions(-)

diff --git a/src/Makefile.in b/src/Makefile.in
index 15b44e7..a04bdac 100644
--- a/src/Makefile.in
+++ b/src/Makefile.in
@@ -25919,11 +25919,7 @@ clean-local::
 install-data-local::
 	cd $(srcdir)/ceph-detect-init ; \
 	if test "$(DESTDIR)" ; then \
-		if lsb_release -si | grep --quiet 'Ubuntu\|Debian\|Devuan' ; then \
-			options=--install-layout=deb ; \
-		else \
-			options=--prefix=/usr ; \
-		fi ; \
+		options=--prefix=/usr ; \
 		root="--root=$(DESTDIR)" ; \
 	fi ; \
 	python setup.py install $$root $$options
diff --git a/src/ceph-detect-init/Makefile.am b/src/ceph-detect-init/Makefile.am
index a2c885a..8c111c7 100644
--- a/src/ceph-detect-init/Makefile.am
+++ b/src/ceph-detect-init/Makefile.am
@@ -62,11 +62,7 @@ clean-local::
 install-data-local::
 	cd $(srcdir)/ceph-detect-init ; \
 	if test "$(DESTDIR)" ; then \
-		if lsb_release -si | grep --quiet 'Ubuntu\|Debian\|Devuan' ; then \
-			options=--install-layout=deb ; \
-		else \
-			options=--prefix=/usr ; \
-		fi ; \
+		options=--prefix=/usr ; \
 		root="--root=$(DESTDIR)" ; \
 	fi ; \
 	python setup.py install $$root $$options
diff --git a/src/common/util.cc b/src/common/util.cc
index f9262f3..ce0e27f 100644
--- a/src/common/util.cc
+++ b/src/common/util.cc
@@ -238,7 +238,7 @@ void collect_sys_info(map<string, string> *m, CephContext *cct)
   }
 
   // distro info
-  lsb_release_parse(m, cct);
+  // lsb_release_parse(m, cct);
 }
 
 void dump_services(Formatter* f, const map<string, list<int> >& services, const char* type)
-- 
2.5.0

